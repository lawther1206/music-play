import{r as k,a as H,o as X,b as h,w as g,c as I,d as Y,e as C,f as n,v as f,g as w,n as b,t as p,h as E,F as z,i as F,j as U,k as W,_ as S,p as G,l as J}from"./index-eAQTeVra.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const D=(_,v)=>{const s=_[v];return s?typeof s=="function"?s():Promise.resolve(s):new Promise((o,m)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(m.bind(null,new Error("Unknown variable dynamic import: "+v)))})},Q=_=>(G("data-v-1ecb730b"),_=_(),J(),_),Z={class:"music-card-content"},ee={class:"right"},te={class:"right-title"},ne={class:"right-silde"},se={class:"right-silde-start"},oe={class:"right-silde-end"},ae={class:"btn-list"},ie=Q(()=>n("div",{class:"btn-item"},"🆕",-1)),ce={class:"list-card"},le={class:"list-card-title"},re={class:"list-card-content"},ue={class:"mask"},de=["onClick"],me={class:"mask-item-left"},pe={class:"mask-item-right"},_e={__name:"index",setup(_){const v={mounted(t){const c=t.getElementsByClassName("left-img")[0];let a=0,r=0;c.ontouchstart=function(i){a=i.touches[0].pageX-t.getBoundingClientRect().left,r=i.touches[0].pageY-t.getBoundingClientRect().top,document.ontouchmove=u},c.onmousedown=function(i){return a=i.clientX-t.getBoundingClientRect().left,r=i.clientY-t.getBoundingClientRect().top,document.onmousemove=u,!1};function u(i){let l,d;i.touches?(l=i.touches[0].pageX-a,d=i.touches[0].pageY-r):(l=i.clientX-a,d=i.clientY-r);let M=document.documentElement.clientWidth-t.clientWidth,A=document.documentElement.clientHeight-t.clientHeight;l=Math.max(Math.min(l,M),0),d=Math.max(Math.min(d,A),0),t.style.left=l+"px",t.style.top=d+"px"}document.ontouchend=document.onmouseup=function(){document.ontouchmove=document.onmousemove=null}}},s=k([]),o=k(null),m=k(!0),e=H({currentSongIndex:0,currentSongTime:0,timeMax:0,isStop:!0}),V=()=>{var t;e.timeMax=((t=o.value)==null?void 0:t.duration)??0},B=()=>{var t;e.currentSongTime=((t=o.value)==null?void 0:t.currentTime)??0},R=t=>{o.value&&(o.value.currentTime=t)},L=()=>{e.isStop=!1,o.value&&o.value.play()},O=()=>{e.isStop=!0,o.value&&o.value.pause()},P=()=>{e.currentSongIndex=(e.currentSongIndex-1)%s.value.length,e.currentSongIndex<0&&(e.currentSongIndex=0),x()},y=()=>{e.currentSongIndex=(e.currentSongIndex+1)%s.value.length,x()},j=t=>{e.currentSongIndex=t,x()},x=()=>{o.value&&(e.isStop=!1,o.value.pause(),o.value.currentTime=0,o.value.src=s.value[e.currentSongIndex].url,o.value.play())},T=t=>{const c=Math.floor(t/60),a=Math.floor(t%60),r=String(c).padStart(2,"0"),u=String(a).padStart(2,"0");return`${r}:${u}`},q=()=>{m.value=!1},N=()=>{m.value||(m.value=!0)},$=async()=>{let t=await W();s.value=t.data.result??[];for(let c=0;c<s.value.length;c++){let a=s.value[c],r=await D(Object.assign({"../../assets/audio/fqxdsws.mp3":()=>S(()=>import("./fqxdsws-BAmajAPt.js"),[]),"../../assets/audio/haqs.mp3":()=>S(()=>import("./haqs-D_dVQ0DO.js"),[])}),`../../assets/audio/${a.key}.mp3`);a.url=r.default;let u=await D(Object.assign({"../../assets/image/fqxdsws.jpg":()=>S(()=>import("./fqxdsws-Bll6KO-2.js"),[]),"../../assets/image/haqs.jpg":()=>S(()=>import("./haqs-D9l78DoP.js"),[])}),`../../assets/image/${a.key}.jpg`);a.preview=u.default}o.value.src=s.value[e.currentSongIndex].url};return X(()=>{$()}),(t,c)=>{const a=h("el-image"),r=h("el-slider"),u=h("el-popover"),i=h("el-card");return s.value.length>0?g((I(),Y(i,{key:0,class:"music-card"},{default:C(()=>[n("div",Z,[g(n("div",{class:"del-icon",onClick:q},"×",512),[[f,m.value]]),n("div",{class:"left",onClick:N},[w(a,{class:b([{paused:!e.isStop},"left-img"]),src:s.value[e.currentSongIndex].preview},null,8,["class","src"])]),g(n("div",ee,[n("div",te,p(s.value[e.currentSongIndex].name)+"-"+p(s.value[e.currentSongIndex].singer),1),n("div",ne,[n("div",se,p(T(e.currentSongTime)),1),w(r,{modelValue:e.currentSongTime,"onUpdate:modelValue":c[0]||(c[0]=l=>e.currentSongTime=l),"show-tooltip":!1,max:e.timeMax,size:"small",onChange:R},null,8,["modelValue","max"]),n("div",oe,p(T(e.timeMax)),1)]),n("div",ae,[n("div",{onClick:P,class:"btn-item"},"⏪"),g(n("div",{onClick:L,class:"btn-item"},"▶️",512),[[f,e.isStop]]),g(n("div",{onClick:O,class:"btn-item"},"⏸️",512),[[f,!e.isStop]]),n("div",{onClick:y,class:"btn-item"},"⏩"),w(u,{width:250,trigger:"click","popper-class":"my-popover"},{reference:C(()=>[ie]),default:C(()=>[n("div",ce,[n("div",le,"播放列表("+p(s.value.length)+")",1),n("div",re,[n("div",ue,[(I(!0),E(z,null,F(s.value,(l,d)=>(I(),E("div",{key:l.key,class:b(["mask-item",{active:e.currentSongIndex==d}]),onClick:M=>j(d)},[n("span",me,p(l.name),1),n("span",pe,p(l.singer),1)],10,de))),128))])])])]),_:1})])],512),[[f,m.value]]),n("audio",{ref_key:"audioTag",ref:o,onLoadedmetadata:V,onTimeupdate:B,onEnded:y},null,544)])]),_:1})),[[v]]):U("",!0)}}},he=K(_e,[["__scopeId","data-v-1ecb730b"]]);export{he as default};
